(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b4a3f682"],{"3eb8":function(t,e,n){},"5a4f":function(t,e,n){"use strict";n.r(e);n("a4d3"),n("e01a");var c=n("7a23"),a=Object(c["T"])("data-v-13935f1d");Object(c["B"])("data-v-13935f1d");var i=Object(c["j"])("svg",{class:"icon tab-bar-icon","aria-hidden":"true"},[Object(c["j"])("use",{"xlink:href":"#icon-jiantou"})],-1),r=Object(c["i"])("订单详情"),o={class:"detail-box"},l={class:"text-line"},b=Object(c["j"])("span",null,"订单状态： ",-1),u={class:"text-line"},d=Object(c["j"])("span",null,"订单编号： ",-1),s={class:"text-line"},j=Object(c["j"])("span",null,"下单时间： ",-1),O=Object(c["i"])("去支付"),f=Object(c["i"])("确认订单"),p={id:"order"},v={class:"text-line"},y=Object(c["j"])("span",null,"商品金额： ",-1),h={class:"text-line"},g=Object(c["j"])("span",null,"配送方式： ",-1),m=Object(c["i"])(" 支付宝二维码 ");Object(c["z"])();var _=a((function(t,e,n,_,w,k){var x=Object(c["G"])("nav-bar"),I=Object(c["G"])("van-button"),S=Object(c["G"])("van-card"),C=Object(c["G"])("van-image"),G=Object(c["G"])("van-grid-item"),P=Object(c["G"])("van-grid"),q=Object(c["G"])("van-popup");return Object(c["y"])(),Object(c["g"])("div",null,[Object(c["j"])(x,null,{left:a((function(){return[i]})),middle:a((function(){return[r]})),_:1}),Object(c["j"])("div",o,[Object(c["j"])("div",l,[b,Object(c["i"])(Object(c["K"])(_.payStatus),1)]),Object(c["j"])("div",u,[d,Object(c["i"])(Object(c["K"])(t.detail.order_no),1)]),Object(c["j"])("div",s,[j,Object(c["i"])(Object(c["K"])(t.detail.created_at),1)]),1===t.detail.status?(Object(c["y"])(),Object(c["g"])(I,{key:0,onClick:_.showPayFn,type:"primary",block:""},{default:a((function(){return[O]})),_:1},8,["onClick"])):Object(c["h"])("",!0),2===t.detail.status?(Object(c["y"])(),Object(c["g"])(I,{key:1,onClick:_.handleConfirmOrder,plain:"",type:"primary",block:"",id:"confirm-btn"},{default:a((function(){return[f]})),_:1},8,["onClick"])):Object(c["h"])("",!0),Object(c["j"])("div",p,[Object(c["j"])("div",v,[y,Object(c["i"])("￥"+Object(c["K"])(_.total)+".00",1)]),Object(c["j"])("div",h,[g,Object(c["i"])(Object(c["K"])(t.detail.express_type),1)])]),(Object(c["y"])(!0),Object(c["g"])(c["a"],null,Object(c["E"])(t.detail.orderDetails.data,(function(t){return Object(c["y"])(),Object(c["g"])(S,{key:t.id,num:t.num,price:t.price,desc:t.goods.description,title:t.goods.title,thumb:t.goods.cover_url},null,8,["num","price","desc","title","thumb"])})),128)),Object(c["j"])(q,{closeable:"",show:t.showPay,"onUpdate:show":e[1]||(e[1]=function(e){return t.showPay=e}),"close-on-click-overlay":!1,position:"bottom",style:{height:"40%"}},{default:a((function(){return[Object(c["j"])(P,{border:!1,"column-num":1},{default:a((function(){return[Object(c["j"])(G,null,{default:a((function(){return[m,Object(c["j"])(C,{src:t.ali_qr},null,8,["src"])]})),_:1})]})),_:1})]})),_:1},8,["show"])])])})),w=n("5530"),k=(n("e17f"),n("2241")),x=(n("e7e5"),n("d399")),I=(n("159b"),n("a7ac")),S=n("e05b"),C=n("6c02"),G={name:"OrderDetail",components:{NavBar:I["a"]},setup:function(){var t=Object(C["c"])(),e=(Object(C["d"])(),Object(c["C"])({orderId:"",detail:{orderDetails:{data:[]},status:0,order_no:"",created_at:"",express_type:""},showPay:!1,ali_qr:""})),n=function(){var n=t.query.id;e.orderId=n,Object(S["c"])(n).then((function(t){console.log(t),e.detail=t}))};Object(c["v"])((function(){x["b"].loading({message:"加载中",forbidClick:!0}),n(),x["b"].clear()}));var a=Object(c["e"])((function(){var t={1:"新订单",2:"支付完成",3:"已发货",4:"已确认收货",5:"已过期"};return t[e.detail.status]})),i=Object(c["e"])((function(){var t=0;return e.detail.orderDetails.data.forEach((function(e){t+=parseInt(e.num)*parseFloat(e.goods.price)})),t})),r=function(){e.showPay=!0,Object(S["f"])(e.orderId,{type:"aliyun"}).then((function(t){e.ali_qr=t.qr_code_url}));var t=setInterval((function(){Object(S["g"])(e.orderId).then((function(c){2===c&&(x["b"].success("支付成功"),e.showPay=!1,clearInterval(t),n())}))}),2e3)},o=function(){k["b"].confirm({title:"是否确认订单"}).then((function(){Object(S["a"])(e.orderId).then((function(t){x["b"].success("确认成功"),n()}))})).catch((function(){}))};return Object(w["a"])(Object(w["a"])({},Object(c["L"])(e)),{},{payStatus:a,total:i,showPayFn:r,handleConfirmOrder:o})}};n("97b8");G.render=_,G.__scopeId="data-v-13935f1d";e["default"]=G},"97b8":function(t,e,n){"use strict";n("3eb8")},e01a:function(t,e,n){"use strict";var c=n("23e7"),a=n("83ab"),i=n("da84"),r=n("5135"),o=n("861d"),l=n("9bf2").f,b=n("e893"),u=i.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},s=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof s?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};b(s,u);var j=s.prototype=u.prototype;j.constructor=s;var O=j.toString,f="Symbol(test)"==String(u("test")),p=/^Symbol\((.*)\)[^)]+$/;l(j,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=O.call(t);if(r(d,t))return"";var n=f?e.slice(7,-1):e.replace(p,"$1");return""===n?void 0:n}}),c({global:!0,forced:!0},{Symbol:s})}}}]);
//# sourceMappingURL=chunk-b4a3f682.a7e5a5d1.js.map