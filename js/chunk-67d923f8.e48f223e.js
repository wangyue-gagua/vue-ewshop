(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67d923f8"],{"16da":function(t,e,n){},"4c69":function(t,e,n){"use strict";n("16da")},a38c:function(t,e,n){"use strict";n.r(e);n("b0c0");var c=n("7a23"),r=Object(c["T"])("data-v-4cb60ac4");Object(c["B"])("data-v-4cb60ac4");var a=Object(c["j"])("svg",{class:"icon tab-bar-icon","aria-hidden":"true"},[Object(c["j"])("use",{"xlink:href":"#icon-jiantou"})],-1),o=Object(c["i"])("订单预览"),i={class:"userInfo"},u=Object(c["j"])("br",null,null,-1),d=Object(c["j"])("span",null,"商品金额",-1),s=Object(c["i"])(" 支付宝二维码 ");Object(c["z"])();var b=r((function(t,e,n,b,l,j){var O=Object(c["G"])("nav-bar"),f=Object(c["G"])("van-icon"),p=Object(c["G"])("van-card"),v=Object(c["G"])("van-submit-bar"),h=Object(c["G"])("van-image"),m=Object(c["G"])("van-grid-item"),g=Object(c["G"])("van-grid"),y=Object(c["G"])("van-popup");return Object(c["y"])(),Object(c["g"])("div",null,[Object(c["j"])(O,null,{left:r((function(){return[a]})),middle:r((function(){return[o]})),_:1}),Object(c["j"])("div",i,[Object(c["j"])("div",null,[Object(c["i"])(Object(c["K"])(t.address.name),1),Object(c["j"])("span",null,Object(c["K"])(t.address.phone),1)]),Object(c["j"])(f,{name:"arrow",onClick:b.goTo},null,8,["onClick"]),u,Object(c["j"])("div",null,Object(c["K"])(t.address.province)+" "+Object(c["K"])(t.address.city)+" "+Object(c["K"])(t.address.county)+" "+Object(c["K"])(t.address.address),1)]),(Object(c["y"])(!0),Object(c["g"])(c["a"],null,Object(c["E"])(t.cartList,(function(t){return Object(c["y"])(),Object(c["g"])(p,{key:t.id,num:t.num,price:t.goods.price,title:t.goods.title,thumb:t.goods.cover_url},null,8,["num","price","title","thumb"])})),128)),Object(c["j"])(v,{price:100*b.total,"button-text":"生成订单",onSubmit:b.onSubmit},{default:r((function(){return[d]})),_:1},8,["price","onSubmit"]),Object(c["j"])(y,{closeable:"",show:t.showPay,"onUpdate:show":e[1]||(e[1]=function(e){return t.showPay=e}),"close-on-click-overlay":!1,onClose:b.onClose,position:"bottom",style:{height:"40%"}},{default:r((function(){return[Object(c["j"])(g,{border:!1,"column-num":1},{default:r((function(){return[Object(c["j"])(m,null,{default:r((function(){return[s,Object(c["j"])(h,{src:t.ali_qr},null,8,["src"])]})),_:1})]})),_:1})]})),_:1},8,["show","onClose"])])})),l=n("5530"),j=(n("e7e5"),n("d399")),O=(n("4de4"),n("159b"),n("a7ac")),f=n("e05b"),p=n("6c02"),v=n("5502"),h={name:"CreateOrder",components:{NavBar:O["a"]},setup:function(){Object(p["c"])();var t=Object(p["d"])(),e=Object(v["b"])(),n=Object(c["C"])({cartList:[],address:{name:"",phone:"",city:"",province:"",county:"",address:""},showPay:!1,orderId:"",ali_qr:"",wx_qr:""}),r=function(){j["b"].loading({message:"加载中...",forbidClick:!0}),Object(f["e"])().then((function(t){var e=t.address.filter((function(t){return 1===t.is_default}));0===e.length?n.address={address:"还没有默认地址，请选择或添加默认地址"}:n.address=e[0],n.cartList=t.carts,j["b"].clear()}))};Object(c["v"])((function(){r()}));var a=function(){t.push({path:"/address-list"})},o=Object(c["e"])((function(){var t=0;return n.cartList.forEach((function(e){t+=parseInt(e.num)*parseFloat(e.goods.price)})),t})),i=function(){var c={address_id:n.address.id};Object(f["b"])(c).then((function(c){j["b"].success("创建成功"),e.dispatch("updateCart"),n.showPay=!0,n.orderId=c.id,Object(f["f"])(n.orderId,{type:"aliyun"}).then((function(t){n.ali_qr=t.qr_code_url}));var r=setInterval((function(){Object(f["g"])(n.orderId).then((function(e){2===e&&(clearInterval(r),t.push({path:"/orderDetail",query:{id:n.orderId}}))}))}),2e3)}))},u=function(){t.push({path:"/orderDetail",query:{id:n.orderId}})};return Object(l["a"])(Object(l["a"])({onSubmit:i,onClose:u},Object(c["L"])(n)),{},{goTo:a,total:o})}};n("4c69");h.render=b,h.__scopeId="data-v-4cb60ac4";e["default"]=h},b0c0:function(t,e,n){var c=n("83ab"),r=n("9bf2").f,a=Function.prototype,o=a.toString,i=/^\s*function ([^ (]*)/,u="name";c&&!(u in a)&&r(a,u,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-67d923f8.e48f223e.js.map